<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Search</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-firestore.js"></script>
</head>

<body class="bg-gray-100 min-h-screen">

  <div class="max-w-5xl mx-auto p-4 space-y-4">

    <div class="flex justify-between">
      <h1 class="text-2xl font-bold">搜尋結果</h1>
      <a href="main.html" class="px-4 py-2 rounded-xl bg-gray-200 hover:bg-gray-300">返回</a>
    </div>

    <div id="results" class="grid md:grid-cols-2 gap-4"></div>
  </div>

  <script type="module">
    const firebaseConfig = {
      // 你的 firebase config
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const keyword = new URLSearchParams(window.location.search).get("q") || "";

    db.collection("notes").get().then(snap => {
      results.innerHTML = "";
      snap.forEach(doc => {
        const d = doc.data();
        const hit =
          (d.title && d.title.includes(keyword)) ||
          (d.content && d.content.includes(keyword));

        if (!hit) return;

        results.innerHTML += `
          <div class="rounded-2xl shadow p-4 bg-white">
            <h3 class="font-semibold">${d.title || "未命名"}</h3>
            <div class="mt-2">${d.content}</div>
          </div>
        `;
      });
    });
  </script>
</body>
</html>
